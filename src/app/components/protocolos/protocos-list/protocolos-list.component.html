<div class="container">
  <div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">

  <div class="input-group">
  <!-- Campo de busca pelo nome do paciente -->
      <input (keyup.enter)="findByPacienteNome()" [(ngModel)]="pesquisa" type="text" class="form-control" placeholder="Parte do nome..."
      aria-label="Recipient's username with two button addons" />


      <button (click)="findByPacienteNome()" class="btn btn-outline-primary" type="button" mdbRipple rippleColor="danger" >
        Pesquisar
      </button>

      <button (click)="findAll()" class="btn btn-outline-primary" type="button" mdbRipple rippleColor="danger" >
        Todos
      </button>

      <button (click)="findByAtivo()" class="btn btn-outline-primary" type="button" mdbRipple rippleColor="danger" >
        Ativos
      </button>

      <button (click)="findByInativo()" class="btn btn-outline-primary" type="button" mdbRipple rippleColor="danger" >
        Inativos
      </button>
  
 

</div>

  <!-- Tabela de protocolos -->
  <table class="table align-middle mb-0 bg-white">
    <thead class="bg-light">
      <tr>
        <!-- <th>ID</th> -->
        <th>Nome do Paciente</th> 
        <th>Status</th>
        <th>Data Abertura</th>
        <th>Ações</th>
        <th>Detalhes</th>
      </tr>
    </thead>
    <tbody>
      @for (protocolo of lista; track $index){
      <tr>
        <td>{{ protocolo.paciente.nome }}</td> 
        <td>
          <span [ngClass]="statusProtocoloService.renderStatusProtocolo(protocolo)">{{statusProtocoloService.listStatusProtocolo(protocolo)}}
          </span>
        </td>
        <td>{{ protocolo.dataAbertura}}</td>
        <td>
          <button (click)="encerrar(protocolo)" type="button" class="btn btn-secondary"mdbRipple>Encerrar</button>
       
          <br>
          <br>
          <!-- ao cadastrar passo o id do paciente atrelado ao protocolo da lista -->
          <button (click)="cadastrar(protocolo.paciente.id)" type="button" class="btn btn-secondary" mdbRipple>Criar novo</button>
        </td>

        <td>
          <button (click)="navigateToInfo(protocolo.id)" type="button" class="btn btn-secondary" mdbRipple>Detalhes</button>
        </td>
      </tr>
    }
    </tbody>
  </table>
</div>
</div>

</div>
</div>
</div>


     <!-- MODAL  -->
    <ng-template #modalProtocoloForm>
      <div class="modal-fullscreen">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Dados de Protocolo</h5>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="modalRef.close()"
        ></button>
      </div>
      <div class="modal-body">
        
        
        <app-protocolos-form [protocolo]="protocoloEdit" (retorno)="retornoForm($event)"></app-protocolos-form>
    
      </div>
    </div>
    
    </ng-template>